# Judge-Service nsjail base configuration
# This file defines a minimal but functional chroot environment.

name: "judge-box"
description: "Sandbox for running untrusted user code"
mode: ONCE

# Default limits (can be overridden by command-line flags)
time_limit: 10
rlimit_as: 512 # 512MB default memory limit

# Mount essential directories for a functional Linux environment
# These are mounted as read-only for security.
mount: [
  {
    src: "/bin",
    dst: "/bin",
    is_bind: true,
    ro: true,
  },
  {
    src: "/lib",
    dst: "/lib",
    is_bind: true,
    ro: true,
  },
  {
    src: "/lib64",
    dst: "/lib64",
    is_bind: true,
    ro: true,
  },
  {
    src: "/usr/bin",
    dst: "/usr/bin",
    is_bind: true,
    ro: true,
  },
  {
    src: "/usr/lib",
    dst: "/usr/lib",
    is_bind: true,
    ro: true,
  }
]

# Security settings
proc_ro: true
iface_no_lo: true
clone_newnet: true
clone_newuser: true
clone_newns: true
clone_newpid: true
clone_newipc: true
clone_newuts: true
clone_newcgroup: true
